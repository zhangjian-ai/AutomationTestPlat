{"version":3,"sources":["webpack:///./src/components/login/logon.vue?9320","webpack:///src/components/login/logon.vue","webpack:///./src/components/login/logon.vue?25ef","webpack:///./src/components/login/logon.vue?df1e","webpack:///./src/components/login/logon.vue?3b1f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","logonForm","rules","ding","model","value","callback","$$v","$set","expression","staticStyle","flag","on","$event","sendSmsCode","_v","_s","tip","submit","staticRenderFns","props","data","res","count","Error","pattern","test","username","nickname","email","password","password2","mobile","smsCode","subForm","form","methods","$refs","validate","valid","$message","type","message","checkProps","mounted","component"],"mappings":"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","file":"js/chunk-2bb8b226.18b95040.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sub-box\"},[_c('el-form',{ref:\"logonForm\",attrs:{\"model\":_vm.logonForm,\"rules\":_vm.rules,\"size\":\"mini\",\"label-width\":\"6em\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\",\"label\":\"账号\"}},[_c('el-input',{attrs:{\"disabled\":_vm.ding},model:{value:(_vm.logonForm.username),callback:function ($$v) {_vm.$set(_vm.logonForm, \"username\", $$v)},expression:\"logonForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"nickname\",\"label\":\"昵称\"}},[_c('el-input',{model:{value:(_vm.logonForm.nickname),callback:function ($$v) {_vm.$set(_vm.logonForm, \"nickname\", $$v)},expression:\"logonForm.nickname\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}},[_c('el-input',{model:{value:(_vm.logonForm.email),callback:function ($$v) {_vm.$set(_vm.logonForm, \"email\", $$v)},expression:\"logonForm.email\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\",\"label\":\"密码\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.logonForm.password),callback:function ($$v) {_vm.$set(_vm.logonForm, \"password\", $$v)},expression:\"logonForm.password\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password2\",\"label\":\"确认密码\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.logonForm.password2),callback:function ($$v) {_vm.$set(_vm.logonForm, \"password2\", $$v)},expression:\"logonForm.password2\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"mobile\",\"label\":\"手机\"}},[_c('el-input',{model:{value:(_vm.logonForm.mobile),callback:function ($$v) {_vm.$set(_vm.logonForm, \"mobile\", $$v)},expression:\"logonForm.mobile\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"smsCode\",\"label\":\"验证码\"}},[_c('el-input',{staticStyle:{\"width\":\"40%\"},attrs:{\"palceholder\":\"验证码\"},model:{value:(_vm.logonForm.smsCode),callback:function ($$v) {_vm.$set(_vm.logonForm, \"smsCode\", $$v)},expression:\"logonForm.smsCode\"}}),_c('el-button',{staticStyle:{\"width\":\"35%\",\"margin-left\":\"5%\"},attrs:{\"type\":\"primary\",\"disabled\":_vm.flag},on:{\"click\":function($event){return _vm.sendSmsCode()}}},[_vm._v(_vm._s(_vm.tip))])],1)],1),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"立 即 注 册\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"sub-box\">\n    <el-form :model=\"logonForm\" :rules=\"rules\" ref=\"logonForm\" size=\"mini\" label-width=\"6em\">\n      <el-form-item prop=\"username\" label=\"账号\">\n        <el-input v-model=\"logonForm.username\" :disabled=\"ding\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"nickname\" label=\"昵称\">\n        <el-input v-model=\"logonForm.nickname\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"email\" label=\"邮箱\">\n        <el-input v-model=\"logonForm.email\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"password\" label=\"密码\">\n        <el-input type=\"password\" v-model=\"logonForm.password\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"password2\" label=\"确认密码\">\n        <el-input type=\"password\" v-model=\"logonForm.password2\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"mobile\" label=\"手机\">\n        <el-input v-model=\"logonForm.mobile\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"smsCode\" label=\"验证码\">\n        <el-input v-model=\"logonForm.smsCode\" palceholder=\"验证码\" style=\"width: 40%;\"></el-input>\n        <el-button\n          type=\"primary\"\n          @click=\"sendSmsCode()\"\n          style=\"width: 35%; margin-left:5%;\"\n          :disabled=\"flag\"\n        >{{ tip }}</el-button>\n      </el-form-item>\n    </el-form>\n    <el-button type=\"danger\" @click=\"submit()\">立&nbsp;即&nbsp;注&nbsp;册</el-button>\n  </div>\n</template>\n<script>\n/* eslint-disable */\nimport { send_sms_code, logon, check_user, rsa_encrypt } from \"@/api\";\nexport default {\n  props: [\"ding\", \"form\"],\n  data() {\n    // 表单校验方法\n    const checkUsername = (rule, value, callback) => {\n      check_user(value).then(res => {\n        if (res.data.count > 0) {\n          callback(new Error(\"用户名已存在\"));\n        }\n        callback();\n      });\n    };\n    const checkEmail = (rule, value, callback) => {\n      if (value) {\n        let pattern = /^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/;\n        if (!pattern.test(value)) {\n          callback(new Error(\"邮箱格式错误\"));\n        }\n      }\n      callback();\n    };\n    const checkPassword2 = (rule, value, callback) => {\n      if (value != this.logonForm.password) {\n        callback(new Error(\"请确认两次密码一致\"));\n      }\n      callback();\n    };\n    const checkMobile = (rule, value, callback) => {\n      check_user(value).then(res => {\n        if (res.data.count > 0) {\n          callback(new Error(\"手机号已被注册\"));\n        }\n        callback();\n      });\n    };\n    return {\n      // 注册表单\n      logonForm: {},\n      // 表单校验规则\n      rules: {\n        username: [\n          {\n            required: true,\n            pattern: /^[\\.\\w]{6,18}$/,\n            message: \"账号由6-18位数字 字母 . 下划线 组成\",\n            trigger: \"blur\"\n          },\n          { validator: checkUsername, trigger: \"submit\" }\n        ],\n        nickname: [\n          {\n            required: true,\n            pattern: /^[\\u2E80-\\u9FFF]{2,8}$/,\n            message: \"昵称由2-8位中文字符组成\",\n            trigger: \"blur\"\n          }\n        ],\n        email: [{ validator: checkEmail, trigger: \"blur\" }],\n        password: [\n          {\n            required: true,\n            pattern: /^\\S{8,20}$/,\n            message: \"密码不合法\",\n            trigger: \"blur\"\n          }\n        ],\n        password2: [\n          { required: true, message: \"确认密码必填\", trigger: \"blur\" },\n          { validator: checkPassword2, trigger: \"blur\" }\n        ],\n        mobile: [\n          {\n            required: true,\n            pattern: /^1[3-9]{1}\\d{9}$/,\n            message: \"手机号码错误\",\n            trigger: \"blur\"\n          },\n          { validator: checkMobile, trigger: \"submit\" }\n        ],\n        smsCode: [\n          {\n            required: true,\n            pattern: /^\\d{6}$/,\n            message: \"验证码错误\",\n            trigger: \"blur\"\n          }\n        ]\n      },\n      // 短信按钮文本和按钮状态\n      tip: \"发送验证码\",\n      flag: false,\n\n      // 初始化props里面的参数。prop是单向绑定的，不应该在子组件内部改变prop。\n      // 之所以有想修改prop中数据的冲动，主要是prop作为初始值传入后，子组件想把它当作局部数据来用。\n      // 对于这种情况，官方的说法是定义一个局部变量，并用 prop 的值初始化它\n      subForm: this.form\n    };\n  },\n  methods: {\n    submit() {\n      this.$refs.logonForm.validate(valid => {\n        if (valid) {\n          let form = JSON.parse(JSON.stringify(this.logonForm));\n          // 用户密码加密\n          form.password = rsa_encrypt(form.password);\n          form.password2 = rsa_encrypt(form.password2);\n\n          // 提交表单\n          logon(form).then(res => {\n            // 保存token信息\n            this.$store.commit(\"setStatus\", res.data);\n            // 进入主页\n            this.$router.replace(\"/\");\n          });\n        }\n      });\n    },\n    // 发送短信验证码\n    sendSmsCode() {\n      let pattern = /^1[3-9]{1}\\d{9}$/;\n      if (!pattern.test(this.logonForm.mobile)) {\n        this.$message({\n          type: \"error\",\n          message: \"手机号非法\"\n        });\n      } else {\n        send_sms_code(this.logonForm.mobile).then(() => {\n          this.flag = true;\n          // 定义一个计数器，倒计时短信发送周期，周期为60s\n          let num = 60;\n          let timer = setInterval(\n            () => {\n              if (num == 1) {\n                // 销毁计数器\n                clearInterval(timer);\n                //修改按钮文本和状态\n                this.tip = \"发送验证码\";\n                this.flag = false;\n              } else {\n                num -= 1;\n                this.tip = num + \" s\";\n              }\n            },\n            1000,\n            60\n          );\n        });\n      }\n    },\n    // 判断props是否传值\n    checkProps() {\n      if (this.subForm) {\n        this.logonForm = this.subForm;\n      }\n    }\n  },\n  mounted() {\n    this.checkProps();\n  }\n};\n</script>\n<style scoped>\n.sub-box {\n  text-align: left;\n  width: 100%;\n}\n.el-input {\n  width: 80%;\n}\n.el-button {\n  width: 80%;\n  margin-left: 10%;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./logon.vue?vue&type=template&id=c7ea09ca&scoped=true&\"\nimport script from \"./logon.vue?vue&type=script&lang=js&\"\nexport * from \"./logon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./logon.vue?vue&type=style&index=0&id=c7ea09ca&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c7ea09ca\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./logon.vue?vue&type=style&index=0&id=c7ea09ca&scoped=true&lang=css&\""],"sourceRoot":""}