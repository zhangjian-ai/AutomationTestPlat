(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56c8f666"],{"0606":function(e,t,n){},"062e":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-pagination",{attrs:{small:"","current-page":e.page,"page-sizes":[15,30,60,100],"page-size":e.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},l=[],a={props:["count","page","page_size"],data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("update:page",1),this.$emit("update:page_size",e),this.$emit("function")},handleCurrentChange:function(e){this.$emit("update:page",e),this.$emit("function")}}},s=a,o=n("2877"),r=Object(o["a"])(s,i,l,!1,null,"75ced178",null);t["a"]=r.exports},b081:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"header"},[n("div",{staticClass:"condition"},[n("el-form",{attrs:{inline:!0,model:e.conditions,size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getJobsByQuery()}}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"任务编号:"}},[n("el-input",{attrs:{placeholder:"任务编号",clearable:""},model:{value:e.conditions.task_no,callback:function(t){e.$set(e.conditions,"task_no",t)},expression:"conditions.task_no"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"任务名称:"}},[n("el-input",{attrs:{placeholder:"任务名称",clearable:""},model:{value:e.conditions.task_name,callback:function(t){e.$set(e.conditions,"task_name",t)},expression:"conditions.task_name"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"任务状态:"}},[n("el-select",{attrs:{placeholder:"任务状态",clearable:""},model:{value:e.conditions.status,callback:function(t){e.$set(e.conditions,"status",t)},expression:"conditions.status"}},e._l(e.$store.state.status,(function(e){return n("el-option",{key:e[0],attrs:{label:e[1],value:e[0]}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"优先级:"}},[n("el-select",{attrs:{placeholder:"优先级",clearable:""},model:{value:e.conditions.level,callback:function(t){e.$set(e.conditions,"level",t)},expression:"conditions.level"}},e._l(e.$store.state.levels,(function(e){return n("el-option",{key:e[0],attrs:{label:e[1],value:e[0]}})})),1)],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"任务类型:"}},[n("el-select",{attrs:{placeholder:"任务类型",clearable:""},model:{value:e.conditions.type,callback:function(t){e.$set(e.conditions,"type",t)},expression:"conditions.type"}},e._l(e.$store.state.categories,(function(e){return n("el-option",{key:e.id,attrs:{label:e[1],value:e[0]}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"创建人:"}},[n("el-select",{attrs:{placeholder:"创建人",clearable:"",filterable:""},model:{value:e.conditions.create_user,callback:function(t){e.$set(e.conditions,"create_user",t)},expression:"conditions.create_user"}},e._l(e.$store.state.users,(function(e){return n("el-option",{key:e.id,attrs:{label:e.nickname,value:e.id}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"责任人:"}},[n("el-select",{attrs:{placeholder:"责任人",clearable:"",filterable:""},model:{value:e.conditions.executor,callback:function(t){e.$set(e.conditions,"executor",t)},expression:"conditions.executor"}},e._l(e.$store.state.users,(function(e){return n("el-option",{key:e.id,attrs:{label:e.nickname,value:e.id}})})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"延期:"}},[n("el-select",{attrs:{placeholder:"是否延期",clearable:""},model:{value:e.conditions.is_delay,callback:function(t){e.$set(e.conditions,"is_delay",t)},expression:"conditions.is_delay"}},[n("el-option",{attrs:{label:"是",value:!0}}),n("el-option",{attrs:{label:"否",value:!1}})],1)],1)],1)],1)],1),n("el-row",[n("el-col",{staticStyle:{"text-align":"left"},attrs:{span:2}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-document",size:"mini"},on:{click:function(t){return e.openDialog(e.selectedRows)}}},[e._v("批量指派")])],1),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:21}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.getJobsByQuery()}}},[e._v("查询")]),n("el-button",{attrs:{icon:"el-icon-refresh-left",size:"mini"},on:{click:function(t){e.conditions={}}}},[e._v("重置")])],1)],1)],1)]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.jobList,size:"mini",border:"","header-cell-style":{background:"#eef1f6",color:"#606266","text-align":"center"}},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center"}}),n("el-table-column",{attrs:{label:"序号",type:"index","min-width":"50%",align:"center"}}),n("el-table-column",{attrs:{prop:"task_no",label:"任务编号","min-width":"150%"}}),n("el-table-column",{attrs:{prop:"task_name",label:"任务名称","min-width":"200%",align:"center"}}),n("el-table-column",{attrs:{prop:"status_str",label:"状态","min-width":"100%",align:"center"}}),n("el-table-column",{attrs:{prop:"level_str",label:"优先级","min-width":"120%",align:"center"}}),n("el-table-column",{attrs:{prop:"type_str",label:"任务类型","min-width":"100%",align:"center"}}),n("el-table-column",{attrs:{label:"测试人员","min-width":"120%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.executor.join("/")))]}}])}),n("el-table-column",{attrs:{prop:"product",label:"产品","min-width":"120%",align:"center"}}),n("el-table-column",{attrs:{prop:"frontend",label:"前端开发","min-width":"120%",align:"center"}}),n("el-table-column",{attrs:{prop:"backend",label:"后端开发","min-width":"120%",align:"center"}}),n("el-table-column",{attrs:{prop:"expect_end_time",label:"计划完成时间","min-width":"150%",align:"center"}}),n("el-table-column",{attrs:{prop:"actual_end_time",label:"实际完成时间","min-width":"150%",align:"center"}}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间","min-width":"150%",align:"center"}}),n("el-table-column",{attrs:{label:"延期","min-width":"60%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.is_delay?"是":"否"))]}}])}),n("el-table-column",{attrs:{prop:"create_user",label:"创建人","min-width":"80%",align:"center"}}),n("el-table-column",{attrs:{prop:"prd_no",label:"关联需求","min-width":"160%",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{directives:[{name:"show",rawName:"v-show",value:t.row.status<2,expression:"scope.row.status < 2"}],attrs:{underline:!1,type:"primary"},on:{click:function(n){return e.openDialog([t.row])}}},[e._v("指派")]),n("el-link",{directives:[{name:"show",rawName:"v-show",value:t.row.status<3,expression:"scope.row.status < 3"}],attrs:{type:"primary",underline:!1},on:{click:function(n){return e.deleteJob(t.row.id)}}},[e._v("取消")])]}}])})],1),n("el-row",{staticStyle:{"text-align":"right"}},[n("pagination",{attrs:{count:e.count,page:e.page,page_size:e.page_size},on:{"update:page":function(t){e.page=t},"update:page_size":function(t){e.page_size=t},function:e.getJobs}})],1),n("el-dialog",{attrs:{title:"指派测试任务",visible:e.dialogVisible,"close-on-click-modal":!1,width:"25%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"dispatchForm",attrs:{rules:e.dispatchRules,model:e.dispatchForm,"label-width":"6em",size:"mini"}},[n("el-form-item",{attrs:{label:"指派给:",prop:"ids"}},[n("el-select",{attrs:{filterable:"",clearable:"",multiple:""},model:{value:e.dispatchForm.ids,callback:function(t){e.$set(e.dispatchForm,"ids",t)},expression:"dispatchForm.ids"}},e._l(e.$store.state.users,(function(e){return n("el-option",{key:e.id,attrs:{label:e.nickname,value:e.id}})})),1)],1)],1),n("div",{staticStyle:{"text-align":"right","margin-top":"2em","margin-right":"1em"}},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.dispatchJob()}}},[e._v("确 认")])],1)],1)],1)},l=[],a=n("062e"),s=n("365c"),o={data:function(){return{jobList:[],conditions:{},loading:!1,count:0,page:1,page_size:15,dialogVisible:!1,dispatchForm:{},dispatchRules:{ids:[{required:!0,message:"请选择指派人",trigger:"blur"}]},selectedRows:[],job_ids:[]}},methods:{getJobs:function(){var e=this;this.loading=!0,Object(s["r"])(this.page,this.page_size,this.conditions).then((function(t){e.jobList=t.data.results,e.count=t.data.count,e.loading=!1}))},getJobsByQuery:function(){this.page=1,this.getJobs()},handleSelectionChange:function(e){this.selectedRows=e},openDialog:function(e){if(this.job_ids=[],0!=e.length){for(var t in e){if(e[t].status>=2)return void this.$message({type:"warning",message:"已指派任务不能再次指派"});this.job_ids.push(e[t].id)}this.dialogVisible=!0}else this.$message({type:"warning",message:"未勾选测试任务"})},dispatchJob:function(){var e=this;this.$refs.dispatchForm.validate((function(t){t&&(e.dispatchForm.job_ids=e.job_ids,Object(s["k"])(e.dispatchForm).then((function(t){e.$message({type:"success",message:t.data.msg}),e.dialogVisible=!1,e.dispatchForm={},e.getJobs()})))}))},deleteJob:function(e){var t=this;this.$confirm("您确定取消该测试任务吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["i"])(e).then((function(e){t.$message({type:"success",message:e.data.msg}),t.getJobs(),t.$store.dispatch("jobInductions")}))}))}},created:function(){this.getJobs()},components:{pagination:a["a"]}},r=o,c=(n("f576"),n("2877")),u=Object(c["a"])(r,i,l,!1,null,"ea06c856",null);t["default"]=u.exports},f576:function(e,t,n){"use strict";n("0606")}}]);
//# sourceMappingURL=chunk-56c8f666.1c875e92.js.map